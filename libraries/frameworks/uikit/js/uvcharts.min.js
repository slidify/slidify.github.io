/*! 
uvCharts 0.1.0
Copyright (c) 2013, Pramati Technologies Private Ltd 
LICENSE
---------------------------
Permission is hereby granted, free of charge,to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. 

 THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.*/
var uv=function(){var a={};return a.Graph=function(b,c){var d=this;return d.id=a.util.getUniqueId(),d.graphdef=null,d.config=null,d.frame=null,d.panel=null,d.chart=null,d.bg=null,d.effects={},d.axes={hor:{group:null,scale:null,func:null,axis:null,line:null,label:null},ver:{group:null,scale:null,func:null,axis:null,line:null,label:null}},d.labels=null,d.categories=null,d.graphdef=b,d.config=a.util.extend({},a.config,c),this},a.Graph.prototype.init=function(){var a=this;return a.max(a.graphdef.stepup).position(a.config.meta.position||"body").setDimensions().setFrame().setPanel().setBackground().setCaption().setSubCaption().setMetadata().setHorizontalAxis().setVerticalAxis().setEffectsObject(),a.config.meta.isDownloadable&&a.setDownloadOptions(),a.config.legend.showlegends&&a.setLegend(),a},a.Graph.prototype.setDimensions=function(){var a=this;return a.height(a.config.dimension.height).width(a.config.dimension.width).top(a.config.margin.top).bottom(a.config.margin.bottom).left(a.config.margin.left).right(a.config.margin.right),this},a.Graph.prototype.setDownloadOptions=function(){if(a.util.isDownloadSupported()){var b=this;b.download=b.panel.append("g").classed(a.constants.classes.download,!0),b.download.append("text").classed(a.constants.classes.download,!0).text(b.config.meta.downloadLabel).attr("y",-b.config.margin.top/2).attr("x",b.config.dimension.width-25).attr("text-anchor",b.config.caption.textanchor).style("font-family",b.config.caption.fontfamily).style("font-size","12").style("cursor",b.config.caption.cursor).style("stroke",b.config.caption.strokecolor).style("text-decoration","underline").on("mouseover",function(){var a=d3.select(this);a.style("color","#0000FF")}).on("mouseout",function(){var a=d3.select(this);a.style("color","#8D8D8D")}).on("click",function(){var c=d3.select(this);c.style("display","none"),a.util.svgToPng(b,function(){c.style("display",null)})})}},a.Graph.prototype.setFrame=function(){var b=this;return b.frame||(b.frame=d3.select(b.position()||"body").append("div").classed(a.constants.classes.chartdiv,!0).style("display","inline-block").append("svg")),b.frame.attr("id",a.constants.classes.uv+"-"+b.id).classed(a.constants.classes.frame,!0).attr("width",b.width()+b.left()+b.right()).attr("height",b.height()+b.top()+b.bottom()),b.frame.append("rect").classed(a.constants.classes.framebg,!0).attr("width",b.width()+b.left()+b.right()).attr("height",b.height()+b.top()+b.bottom()).style("fill",b.config.frame.bgcolor),this},a.Graph.prototype.setPanel=function(){var b=this;return b.panel||(b.panel=b.frame.append("g")),b.panel.attr("id",a.constants.classes.panel+"-"+b.id).classed(a.constants.classes.panel,!0).attr("transform","translate("+b.left()+","+b.top()+")"),this},a.Graph.prototype.setBackground=function(b){var c=this;return c.bg||(c.bg=c.panel.append("rect").classed(a.constants.classes.bg,!0).attr("height",c.height()).attr("width",c.width())),c.bg.style("fill",b||c.config.graph.bgcolor),c.chart=c.panel.append("g").classed(a.constants.classes.chart,!0).style("opacity",c.config.graph.opacity),this},a.Graph.prototype.setCaption=function(){var b=this;return b.caption=b.panel.append("g").classed(a.constants.classes.caption,!0),b.caption.append("text").classed(a.constants.classes.captiontext,!0).text(b.config.meta.caption).attr("y",-b.config.margin.top/2).attr("x",b.config.dimension.width/2).attr("text-anchor",b.config.caption.textanchor).style("font-family",b.config.caption.fontfamily).style("font-size",b.config.caption.fontsize).style("font-weight",b.config.caption.fontweight).style("font-variant",b.config.caption.fontvariant).style("text-decoration",b.config.caption.textdecoration).on("mouseover",a.effects.caption.mouseover(b.config)).on("mouseout",a.effects.caption.mouseout(b.config)),this},a.Graph.prototype.setSubCaption=function(){var b=this;return b.subCaption=b.panel.append("g").classed(a.constants.classes.subcaption,!0),b.subCaption.append("text").classed(a.constants.classes.subcaptiontext,!0).text(b.config.meta.subcaption).attr("y",-b.config.margin.top/2+1*b.config.caption.fontsize).attr("x",b.config.dimension.width/2).attr("text-anchor",b.config.caption.textanchor).style("font-family",b.config.subCaption.fontfamily).style("font-size",b.config.subCaption.fontsize).style("font-weight",b.config.subCaption.fontweight).style("font-variant",b.config.subCaption.fontvariant).style("text-decoration",b.config.subCaption.textdecoration),this},a.Graph.prototype.setMetadata=function(){var b=this;return b.labels=a.util.getLabelArray(b.graphdef),b.categories=a.util.getCategoryArray(b.graphdef),this},a.Graph.prototype.setHorizontalAxis=function(){var b=this;return b.graphdef,b.axes.hor.group||(b.axes.hor.group=b.panel.append("g").classed(a.constants.classes.horaxis,!0).attr("transform","translate(0,"+b.height()+")").style("shape-rendering","crispEdges")),"Horizontal"===b.config.graph.orientation?(b.axes.hor.scale=d3.scale[b.config.scale.type]().domain(["log"===b.config.scale.type?1:0,b.max()]).range([0,b.width()]),b.axes.hor.scale.nice&&b.axes.hor.scale.nice(),b.config.axis.showsubticks||(b.config.axis.subticks=0),b.axes.hor.func=d3.svg.axis().scale(b.axes.hor.scale).ticks(b.config.axis.ticks).tickSize(-b.height(),b.config.axis.minor,0).tickPadding(b.config.axis.padding).tickSubdivide(b.config.axis.subticks).orient("bottom")):(b.axes.hor.scale=d3.scale.ordinal().rangeRoundBands([0,b.width()],b.config.scale.ordinality),b.axes.hor.func=d3.svg.axis().scale(b.axes.hor.scale).tickPadding(b.config.axis.padding).orient("bottom"),b.config.axis.showtext||b.axes.hor.func.tickSize(0)),b.config.axis.showtext||b.axes.hor.func.tickFormat(function(){return""}),this},a.Graph.prototype.setVerticalAxis=function(){var b=this;return b.graphdef,b.axes.ver.group||(b.axes.ver.group=b.panel.append("g").classed(a.constants.classes.veraxis,!0).style("shape-rendering","crispEdges")),"Vertical"===b.config.graph.orientation?(b.axes.ver.scale=d3.scale[b.config.scale.type]().domain([b.max(),"log"===b.config.scale.type?1:0]).range([0,b.height()]),b.axes.ver.scale.nice&&b.axes.ver.scale.nice(),b.config.axis.showsubticks||(b.config.axis.subticks=0),b.axes.ver.func=d3.svg.axis().scale(b.axes.ver.scale).ticks(b.config.axis.ticks).tickSize(-b.width(),b.config.axis.minor,0).tickPadding(b.config.axis.padding).tickSubdivide(b.config.axis.subticks).orient("left")):(b.axes.ver.scale=d3.scale.ordinal().rangeRoundBands([0,b.height()],b.config.scale.ordinality),b.axes.ver.func=d3.svg.axis().scale(b.axes.ver.scale).tickPadding(b.config.axis.padding).orient("left"),b.config.axis.showtext||b.axes.ver.func.tickSize(0)),b.config.axis.showtext||b.axes.ver.func.tickFormat(function(){return""}),this},a.Graph.prototype.setEffectsObject=function(){for(var a=this,b="categories"===a.config.legend.legendtype?a.categories:a.labels,c=0;c<b.length;c++)a.effects[b[c]]={};return a},a.Graph.prototype.drawHorizontalAxis=function(){var b=this;return b.axes.hor.axis=b.axes.hor.group.append("g").style("font-family",b.config.label.fontfamily).style("font-size",b.config.label.fontsize).style("font-weight",b.config.label.fontweight).call(b.axes.hor.func),b.config.axis.showticks&&b.axes.hor.axis.selectAll("line").style("stroke",b.config.axis.strokecolor).style("opacity",b.config.axis.opacity),b.axes.hor.axis.selectAll("path").style("fill","none"),b.axes.hor.line=b.panel.append("line").classed(a.constants.classes.horaxis,!0).attr("y1",b.height()).attr("y2",b.height()).attr("x1","0").attr("x2",b.width()).style("stroke",b.config.axis.strokecolor),b.axes.hor.label=b.axes.hor.group.append("g").classed(a.constants.classes.axeslabelgroup,!0).attr("transform","translate("+b.width()/2+","+(1*b.config.margin.bottom/4+1*b.config.label.fontsize)+")"),b.axes.hor.label.append("text").attr("display","block").classed(a.constants.classes.axeslabel,!0).classed("cal",!0).attr("text-anchor","middle").style("font-size",b.config.axis.fontsize).style("font-family",b.config.axis.fontfamily).text(b.config.meta.hlabel),b.axes.hor.label.append("text").attr("display","block").attr("y",1*b.config.axis.fontsize).attr(a.constants.classes.axessublabel,!0).classed("casl",!0).attr("text-anchor","middle").style("font-size",b.config.axis.fontsize-2).style("font-family",b.config.axis.fontfamily).text(b.config.meta.hsublabel),this},a.Graph.prototype.drawVerticalAxis=function(){var b=this;return b.axes.ver.axis=b.axes.ver.group.append("g").classed(a.constants.classes.axes,!0).style("font-family",b.config.label.fontfamily).style("font-size",b.config.label.fontsize).style("font-weight",b.config.label.fontweight).call(b.axes.ver.func),b.config.axis.showticks&&b.axes.ver.axis.selectAll("line").style("stroke",b.config.axis.strokecolor).style("opacity",b.config.axis.opacity),b.axes.ver.axis.selectAll("path").style("fill","none"),b.axes.ver.line=b.panel.append("line").classed(a.constants.classes.veraxis,!0).attr("y1",0).attr("y2",b.height()).style("stroke",b.config.axis.strokecolor),b.axes.ver.label=b.axes.ver.group.append("g").attr("transform","translate("+-4*b.config.margin.left/5+","+b.height()/2+")rotate(270)"),b.axes.ver.label.append("text").classed(a.constants.classes.axeslabel,!0).attr("text-anchor","middle").classed("cal",!0).style("font-family",b.config.axis.fontfamily).style("font-size",b.config.axis.fontsize).text(b.config.meta.vlabel),b.axes.ver.label.append("text").classed(a.constants.classes.axessublabel,!0).attr("text-anchor","middle").attr("y",+b.config.axis.fontsize).classed("casl",!0).style("font-family",b.config.axis.fontfamily).style("font-size",b.config.axis.fontsize-2).text(b.config.meta.vsublabel),this},a.Graph.prototype.setLegend=function(){var b=this,c=b.panel.append("g").classed(a.constants.classes.legend,!0).attr("transform",function(){if("right"===b.config.legend.position)return"translate("+b.width()+", 10)";if("bottom"===b.config.legend.position){var a=b.height()+b.config.margin.bottom/2+Number(b.config.axis.fontsize);return"translate(0, "+a+")"}});return b.legends=c.selectAll("g").data("categories"===b.config.legend.legendtype?b.categories:b.labels),b.legends.enter().append("g").attr("transform",function(a,c){if("right"===b.config.legend.position)return"translate(10,"+10*(2*c-1)+")";if("bottom"===b.config.legend.position){var d=100*c-b.config.dimension.width*b.config.legend.legendstart,e=20*b.config.legend.legendstart;return d>=b.config.dimension.width&&(b.config.legend.legendstart=b.config.legend.legendstart+1,d=100*c-b.config.dimension.width*b.config.legend.legendstart,e=20*b.config.legend.legendstart),"translate("+d+","+e+")"}}).attr("class",function(c,d){var e="categories"===b.config.legend.legendtype?b.categories[d]:b.labels[d];return a.util.getClassName(this,"cl-"+e)}).attr("disabled","false").on("mouseover",function(a){b.effects[a].mouseover&&"function"==typeof b.effects[a].mouseover&&b.effects[a].mouseover()}).on("mouseout",function(a){b.effects[a].mouseout&&"function"==typeof b.effects[a].mouseout&&b.effects[a].mouseout()}).on("click",function(c,d){a.effects.legend.click(d,this,b)}),b.legends.append("rect").classed(a.constants.classes.legendsign,!0).attr("height",b.config.legend.symbolsize).attr("width",b.config.legend.symbolsize).style("fill",function(c,d){return a.util.getColorBand(b.config,d)}).style("stroke","none"),b.legends.append("text").classed(a.constants.classes.legendlabel,!0).text(function(a,c){return"categories"===b.config.legend.legendtype?b.categories[c]:b.labels[c]}).attr("dx",b.config.legend.textmargin).attr("dy",".71em").attr("text-anchor","start").style("font-family",b.config.legend.fontfamily).style("font-size",b.config.legend.fontsize).style("font-weight",b.config.legend.fontweight),this},a.Graph.prototype.finalize=function(){var a=this;return a.drawHorizontalAxis().drawVerticalAxis(),console.log(a),this},a.Graph.prototype.remove=function(){return this.frame.remove(),this},a.Graph.prototype.removeCaption=function(){return this.caption.remove(),this},a.Graph.prototype.removeLegend=function(){return this.legends[0]&&this.legends[0].parentNode.remove(),this},a.Graph.prototype.removePanel=function(){return this.panel.remove(),this},a.Graph.prototype.removeHorAxis=function(){return this.panel.selectAll("g."+a.constants.classes.horaxis+" > *").remove(),this.panel.selectAll("line."+a.constants.classes.horaxis).remove(),this},a.Graph.prototype.removeVerAxis=function(){return this.panel.selectAll("g."+a.constants.classes.veraxis+" > *").remove(),this.panel.selectAll("line."+a.constants.classes.veraxis).remove(),this},a.Graph.prototype.width=function(a){return a?(this.config.dimension.width=a,this):this.config.dimension.width},a.Graph.prototype.height=function(a){return a?(this.config.dimension.height=a,this):this.config.dimension.height},a.Graph.prototype.top=function(a){return a?(this.config.margin.top=a,this):this.config.margin.top},a.Graph.prototype.bottom=function(a){return a?(this.config.margin.bottom=a,this):this.config.margin.bottom},a.Graph.prototype.left=function(a){return a?(this.config.margin.left=a,this):this.config.margin.left},a.Graph.prototype.right=function(a){return a?(this.config.margin.right=a,this):this.config.margin.right},a.Graph.prototype.position=function(a){return a?(this.config.meta.position=a,this):this.config.meta.position},a.Graph.prototype.caption=function(a){return a?(this.config.meta.caption=a,this):this.config.meta.caption},a.Graph.prototype.subCaption=function(a){return a?(this.config.meta.subCaption=a,this):this.config.meta.caption},a.Graph.prototype.isDownloadable=function(a){return a?(this.config.meta.isDownload=a,this):this.config.meta.isDownload},a.Graph.prototype.max=function(b){return b===!0?(this.config.graph.max=a.util.getStepMaxValue(this.graphdef),this):b===!1?(this.config.graph.max=a.util.getMaxValue(this.graphdef),this):"percent"===b?(this.config.graph.max=100,this):"waterfall"===b?(this.config.graph.max=a.util.getWaterfallMaxValue(this.graphdef),this):this.config.graph.max},a.Graph.prototype.toggleGraphGroup=function(b){var c=this,d=c.categories[b],e=c.frame.select("g.cge-"+a.util.formatClassName(d)).style("display");return a.util.getColorBand(c.config,b),c.frame.selectAll("g.cge-"+a.util.formatClassName(d)).style("display","none"===e?null:"none"),this},a.util={},a.util.inherits=function(a){function b(){}return b.prototype=a.prototype||a,new b},a.util.getUniqueId=function(){return(new Date).getTime()},a.util.getMaxValue=function(a){return d3.max(a.categories.map(function(b){return d3.max(a.dataset[b].map(function(a){return a.value}))}))},a.util.getStepMaxValue=function(a){var b=a.dataset[a.categories[0]].map(function(){return 0});return a.categories.map(function(c){a.dataset[c].map(function(a,c){b[c]+=a.value})}),d3.max(b)},a.util.getWaterfallMaxValue=function(a){var b=a.categories.map(function(){return 0});return a.categories.map(function(c,d){var e=0;a.dataset[c].map(function(a){e+=a.value,b[d]<e&&(b[d]=e)})}),d3.max(b)},a.util.getSumUpArray=function(a){var b=a.dataset[a.categories[0]].map(function(){return 0});return a.categories.map(function(c){a.dataset[c].map(function(a,c){b[c]+=a.value})}),b},a.util.getPercentage=function(a,b){return 100*a/b},a.util.getDataArray=function(a){return a.categories.map(function(b){return a.dataset[b]})},a.util.getTabularArray=function(a){var b,c,d,e,f=[],g=[];for(b=0,e=a.dataset[a.categories[0]].length;e>b;b+=1){for(g=[],g.push(a.dataset[a.categories[0]][b].name),c=0,d=a.categories.length;d>c;c+=1)g.push(a.dataset[a.categories[c]][b].value);f.push(g)}return f},a.util.getLabelArray=function(a,b){return a.dataset[a.categories[b?b:0]].map(function(a){return a.name})},a.util.getCategoryArray=function(a){return a.categories.map(function(a){return a})},a.util.getCategoryData=function(a,b){return b.map(function(b){return a.dataset[b].map(function(a){return a.value})})},a.util.transposeData=function(a){var b,c,d,e,f,g,h,i={},j=a.dataset[a.categories[0]].map(function(a){return a.name});for(b=0,d=j.length;d>b;b+=1)i[j[b]]=[];for(b=0,d=a.categories.length;d>b;b+=1)for(f=a.categories[b],c=0,e=a.dataset[f].length;e>c;c+=1)g=a.dataset[f][c].name,h=a.dataset[f][c].value,i[g].push({name:f,value:h});a.categories=j,a.dataset=i},a.util.getPascalCasedName=function(a){return a.substring(0,1).toUpperCase()+a.substring(1)},a.util.getColorBand=function(b,c){var d=0;return 0!==b.graph.custompalette.length?(d=b.graph.custompalette.length,b.graph.custompalette[c%d]):(d=a.palette[b.graph.palette].length,a.palette[b.graph.palette][c%d])},a.util.formatClassName=function(a){var b=a.trim().replace(/[^A-Za-z0-9_\-]/g,"-").toLowerCase();return b},a.util.svgToPng=function(a,b){if(this.isCanvasSupported()){var c=d3.select(a.frame.node().parentNode).html(),d=document.createElement("canvas"),e=d.getContext("2d");d.setAttribute("width",d3.select(a.frame.node()).attr("width")),d.setAttribute("height",d3.select(a.frame.node()).attr("height")),e.drawSvg(c),d.toBlob(function(a){saveAs(a,"png_download"+Math.ceil(1e5*Math.random())+".png")},"image/png"),b.call()}else console.log("this feature is not supported in this version of browser")},a.util.isDownloadSupported=function(){var a=document.createElement("canvas"),b=a.getContext("2d");return"function"==typeof b.drawSvg&&"function"==typeof a.toBlob},a.util.isCanvasSupported=function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},a.util.endAll=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})},a.util.getClassName=function(b,c){var d=a.util.formatClassName(c);return d3.select(b).attr("class")?-1!==d3.select(b).attr("class").split(" ").indexOf(d)?d3.select(b).attr("class"):d3.select(b).attr("class")+" "+d:d},a.util.getLabelValue=function(a,b){var c=0===b.value%1?b.value:b.value.toFixed(a.config.label.precision);return a.config.label.prefix+String(c)+a.config.label.suffix},a.util._deepClone=function(b,c){if("object"==typeof c){var d=!0;for(var e in c)d=!1,c.hasOwnProperty(e)&&(void 0===b&&(b=Array.isArray(c)?[]:{}),b[e]=a.util._deepClone(b[e],c[e]));d&&(b=Array.isArray(c)?[]:{})}else b=c;return b},a.util.extend=function(){if(void 0===arguments[0]||null===arguments[0])return arguments[0];for(var b=1;b<arguments.length;b++)for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(arguments[0][c]=a.util._deepClone(arguments[0][c],arguments[b][c]));return arguments[0]},a.util.getTooltipText=function(b,c,d,e){if(!b.config.tooltip.show)return"";var f=b.config.tooltip.format;return""===f?c+" ["+d+"] : "+a.util.getLabelValue(e):f.replace(/%c/gi,c).replace(/%l/gi,d).replace(/%v/gi,a.util.getLabelValue(b,e))},a.config={graph:{palette:"Brink",bgcolor:"#FFFFFF",orientation:"Horizontal",max:0,custompalette:[],opacity:1},meta:{position:"#uv-div",caption:"",subcaption:"",hlabel:"",vlabel:"",hsublabel:"",vsublabel:"",isDownloadable:!1,downloadLabel:"Download"},dimension:{width:400,height:400},margin:{top:50,bottom:150,left:100,right:100},frame:{bgcolor:"#FFFFFF"},axis:{ticks:8,subticks:2,padding:5,minor:-10,strokecolor:"#000000",fontfamily:"Arial",fontsize:"14",fontweight:"bold",showticks:!0,showsubticks:!0,showtext:!0,opacity:.1},label:{fontfamily:"Arial",fontsize:"11",fontweight:"normal",strokecolor:"#000000",showlabel:!0,precision:2,prefix:"",suffix:""},tooltip:{show:!0,format:"%c [%l] : %v"},scale:{type:"linear",ordinality:.2},bar:{strokecolor:"none",fontfamily:"Arial",fontsize:"10",fontweight:"bold",textcolor:"#000"},line:{interpolation:"linear"},area:{interpolation:"cardinal",offset:"zero",opacity:.2},pie:{fontfamily:"Arial",fontsize:"14",fontweight:"normal",fontvariant:"small-caps",fontfill:"#FFFFFF",strokecolor:"#FFFFFF",strokewidth:1},donut:{fontfamily:"Arial",fontsize:"14",fontweight:"normal",fontvariant:"small-caps",fontfill:"#000",factor:.4,strokecolor:"#FFFFFF",strokewidth:1},caption:{fontfamily:"Arial",fontsize:"14",fontweight:"bold",fontvariant:"small-caps",textdecoration:"none",hovercolor:"#696969",strokecolor:"#0000FF",textanchor:"middle",cursor:"pointer"},subCaption:{fontfamily:"Arial",fontsize:"9",fontweight:"normal",fontvariant:"normal",textdecoration:"none",textanchor:"middle"},legend:{position:"bottom",fontfamily:"Arial",fontsize:"11",fontweight:"normal",textmargin:15,symbolsize:10,inactivecolor:"#DDD",legendstart:0,legendtype:"categories",showlegends:!0},effects:{hovercolor:"#FF0000",strokecolor:"none",textcolor:"#000000",duration:800,hover:400,showhovertext:!1}},a.constants={},a.constants.classes={uv:"uv",pos:"uv-div",frame:"uv-frame",panel:"uv-panel",bg:"uv-chart-bg",chart:"uv-chart",axes:"uv-axes",legend:"uv-legend",framebg:"uv-frame-bg",horaxis:"uv-hor-axis",veraxis:"uv-ver-axis",caption:"uv-caption",captiontext:"uv-caption-text",subcaption:"uv-subcaption",subcaptiontext:"uv-subcaption-text",axeslabelgroup:"uv-axes-label-group",axeslabel:"uv-axes-label",axessublabel:"uv-axes-sub-label",legendsign:"uv-legend-sign",legendlabel:"uv-legend-label",hoverbg:"uv-hover-bg",arc:"uv-arc-",areapath:"uv-areapath-",linepath:"uv-linepath-",area:"uv-area-",line:"uv-line-",dot:"uv-dot",chartdiv:"uv-chart-div",download:"uv-download-options"},a.constants.downloads={downloadLabel:"Download"},a.types={},a.addChart=function(b,c){a.types[b]=c},a.addChart("Bar","BarGraph"),a.addChart("Line","LineGraph"),a.addChart("StackedBar","StackedBarGraph"),a.addChart("StepUpBar","StepUpBarGraph"),a.addChart("Area","AreaGraph"),a.addChart("StackedArea","StackedAreaGraph"),a.addChart("PercentBar","PercentBarGraph"),a.addChart("PercentArea","PercentAreaGraph"),a.addChart("Pie","PieGraph"),a.addChart("Donut","DonutGraph"),a.addChart("Waterfall","WaterfallGraph"),a.addChart("PolarArea","PolarAreaGraph"),a.chart=function(b,c,d){return void 0!==a.types[b]?new a[a.types[b]](c,d):void 0},a.effects={},a.effects.bar={},a.effects.bar.mouseover=function(b,c){var d=b.config,e=b.categories[c],f=b.labels[c],g=function(){b.frame.selectAll("rect.cr-"+a.util.formatClassName(e)).transition().duration(d.effects.hover).style("fill",d.effects.hovercolor).style("stroke",d.effects.strokecolor),d.effects.showhovertext&&b.frame.selectAll("text.cr-"+a.util.formatClassName(e)).transition().duration(d.effects.hover).style("fill",d.effects.textcolor).style("opacity",1)};return"categories"===d.legend.legendtype?b.effects[e].mouseover=g:b.effects[f].mouseover=g,g},a.effects.bar.mouseout=function(b,c,d){var e=b.config,f=b.categories[c],g=a.util.getColorBand(b.config,c),h=d||a.util.getColorBand(b.config,c),i=b.labels[c],j=function(){b.frame.selectAll("rect.cr-"+a.util.formatClassName(f)).transition().duration(e.effects.hover).style("fill",g).style("stroke","none"),b.frame.selectAll("text.cr-"+a.util.formatClassName(f)).transition().duration(e.effects.hover).style("fill",b.config.label.showlabel?h:"none")};return"categories"===e.legend.legendtype?b.effects[f].mouseout=j:b.effects[i].mouseout=j,j},a.effects.area={},a.effects.area.mouseover=function(b,c){var d=b.config,e=b.categories[c],f=function(){b.frame.selectAll(".cge-"+a.util.formatClassName(e)).select("path."+a.constants.classes.area+a.util.formatClassName(e)).transition().duration(d.effects.hover).style("fill",d.effects.hovercolor)};return b.effects[e].mouseover=f,f},a.effects.area.mouseout=function(b,c){var d=b.config,e=b.categories[c],f=function(){b.frame.selectAll(".cge-"+a.util.formatClassName(e)).select("path."+a.constants.classes.area+a.util.formatClassName(e)),b.frame.selectAll(".cge-"+a.util.formatClassName(e)).select("path."+a.constants.classes.area+a.util.formatClassName(e)).transition().duration(d.effects.hover).style("fill",a.util.getColorBand(d,c))};return b.effects[e].mouseout=f,f},a.effects.line={},a.effects.line.mouseover=function(b,c){var d=b.config,e=b.categories[c],f=function(){b.frame.selectAll(".cge-"+a.util.formatClassName(e)).selectAll("circle").transition().duration(d.effects.hover).style("fill",d.effects.hovercolor).style("fill-opacity",1).style("stroke",d.effects.hovercolor),b.frame.selectAll(".cge-"+a.util.formatClassName(e)).select("path").transition().duration(d.effects.hover).style("stroke",d.effects.hovercolor),d.effects.showhovertext&&b.frame.selectAll(".cge-"+a.util.formatClassName(e)).selectAll("text").transition().duration(d.effects.hover).style("fill",d.effects.textcolor)};return b.effects[e].mouseover=f,f},a.effects.line.mouseout=function(b,c,d){var e=b.config,f=b.categories[c],g=d||a.util.getColorBand(b.config,c),h=function(){b.frame.selectAll(".cge-"+a.util.formatClassName(f)).selectAll("circle").transition().duration(e.effects.hover).style("fill",g).style("fill-opacity",.6).style("stroke","#fff"),b.frame.selectAll(".cge-"+a.util.formatClassName(f)).select("path").transition().duration(e.effects.hover).style("stroke",g),b.frame.selectAll(".cge-"+a.util.formatClassName(f)).selectAll("text").transition().duration(e.effects.hover).style("fill",b.config.label.showlabel?g:"none")};return b.effects[f].mouseout=h,h},a.effects.caption={},a.effects.caption.mouseover=function(b){return function(){d3.select(this.parentNode.parentNode).select("."+a.constants.classes.hoverbg).transition().duration(b.effects.duration).style("fill",b.caption.hovercolor)}},a.effects.caption.mouseout=function(b){return function(){d3.select(this.parentNode.parentNode).select("."+a.constants.classes.hoverbg).transition().duration(b.effects.duration).style("fill",b.graph.bgcolor)}},a.effects.donut={},a.effects.donut.mouseover=function(a,b,c){return function(d){var e={x:b.centroid(d)[0]/5,y:b.centroid(d)[1]/5};d3.select(this.parentNode).transition().duration(c.effects.duration).attr("transform","translate("+(a.x+e.x)+","+(a.y+e.y)+")")}},a.effects.donut.mouseout=function(a,b){return function(){d3.select(this.parentNode).transition().duration(b.effects.duration).attr("transform","translate("+a.x+","+a.y+")")}},a.effects.pie={},a.effects.pie.mouseover=function(a,b,c,d){var e=function(a){var e={x:c.centroid(a)[0]/5,y:c.centroid(a)[1]/5};d3.select(this.parentNode).transition().duration(d.effects.duration).attr("transform","translate("+(b.x+e.x)+","+(b.y+e.y)+")")};return e},a.effects.pie.mouseout=function(a,b,c){var d=function(){d3.select(this.parentNode).transition().duration(c.effects.duration).attr("transform","translate("+b.x+","+b.y+")")};return d},a.effects.legend={},a.effects.legend.mouseover=function(a,b){return"categories"===a.config.legend.legendtype?a.effects.group[a.categories[b]].mouseover:a.effects.group[a.labels[b]].mouseover},a.effects.legend.mouseout=function(a,b){return"categories"===a.config.legend.legendtype?a.effects.group[a.categories[b]].mouseout:a.effects.group[a.labels[b]].mouseout},a.effects.legend.click=function(b,c,d){var e="false"===d3.select(c).attr("disabled")?!1:!0;d.toggleGraphGroup(b),d3.select(c).select("rect").style("fill",e?a.util.getColorBand(d.config,b):a.config.legend.inactivecolor),d3.select(c).select("text").style("fill",e?null:a.config.legend.inactivecolor),d3.select(c).attr("disabled",e?"false":"true")},a.palette={Plain:["#1F77B4"],Simple:["#d42f3c","#85b1e6","#FD6D16","#dfe617"],RGB:["#bb2211","#2222bb","#22aa22","#9999aa","#223322"],Olive:["#B4AF91","#787746","#40411E","#32331D"],"Soil and Sky":["#928174","#AA9788","#BDE4E9","#A8E1E9","#90D1DA"],Candid:["#EADEA1","#808355","#4E493D","#3A301C","#3F7696"],Sulphide:["#949993","#615952","#343640","#A15026","#C7B091"],"New Moon":["#EEE6AB","#C5BC8E","#696758","#45484B","#36393B"],Nature:["#EEEFD8","#BECD8A","#73880A","#CCCC33","#E2EAA3"],Earth:["#862424","#D8D1B4","#B3AB8E","#F1F0E9","#353535"],Sea:["#334433","#6699aa","#88aaaa","#aacccc","#447799"],Lemon:["#eebb00","#ddaa00","#eecc00","#ffee11"],Water:["#2266bb","#3388dd","#55aaee","#bbddee","#113355"],Grass:["#00AF64","#36D729","#61D7A4","#007241"],Hash:["tomato","yellowgreen","midnightblue","lightseagreen","gold"],Soft:["#f1b2e1","#b1ddf3","#ffde89","#e3675c","#c2d985"],Brink:["#01243b","#5288d8","#9da7b2","#c5c5c5","#71c42b"],Bright:["#ef597b","#ff6d31","#73b66b","#ffcb18","#29a2c6"],Lint:["#667b99","#afbbd2","#ccd5e6","#e9eef6","#ff6637"]},a.AreaGraph=function(b,c){var d=this;a.Graph.call(d,b,c).setDefaults().init(),d.areagroups=[],d.dataset=a.util.getDataArray(d.graphdef);var e,f,g,h,i=d.graphdef.dataset[d.graphdef.categories[0]];for(d.axes["Horizontal"===d.config.graph.orientation?"ver":"hor"].scale.domain(i.map(function(a){return a.name})),g=0,h=d.dataset.length;h>g;g+=1)f=d.chart.append("g").classed("cg-"+a.util.formatClassName(d.categories[g]),!0).append("g").classed("cge-"+a.util.formatClassName(d.categories[g]),!0).datum(d.dataset[g]),e={path:f,linefunc:void 0,areafunc:void 0,line:void 0,area:void 0},d["draw"+d.config.graph.orientation+"Area"](e,g),d.areagroups.push(e);d.finalize()},a.AreaGraph.prototype=a.util.inherits(a.Graph),a.AreaGraph.prototype.setDefaults=function(){var a=this;return a.graphdef.stepup=!1,this},a.AreaGraph.prototype.drawHorizontalArea=function(b,c){var d=this,e=a.util.getColorBand(d.config,c);d.axes.ver.scale.rangePoints([0,d.height()]),b.linefunc=d3.svg.line().x(function(a){return d.axes.hor.scale(a.value)}).y(function(a){return d.axes.ver.scale(a.name)+d.axes.ver.scale.rangeBand()/2}).interpolate(d.config.area.interpolation),b.areafunc=d3.svg.area().x0(d.axes.hor.scale(0)).x1(b.linefunc.x()).y(b.linefunc.y()).interpolate(d.config.area.interpolation),b.area=b.path.append("svg:path").classed(a.constants.classes.areapath+c,!0).attr("d",b.areafunc).style("opacity",d.config.area.opacity).style("-moz-opacity",d.config.area.opacity).style("fill",e),b.line=b.path.append("svg:path").classed(a.constants.classes.linepath+c,!0).attr("d",b.linefunc).style("stroke","white").style("fill","none"),b.path.selectAll("."+a.constants.classes.dot).data(d.dataset[c]).enter().append("circle").classed(a.constants.classes.dot,!0).attr("cx",b.linefunc.x()).attr("cy",b.linefunc.y()).attr("r",3.5).style("fill","white")},a.AreaGraph.prototype.drawVerticalArea=function(b,c){var d=this,e=a.util.getColorBand(d.config,c);d.axes.hor.scale.rangePoints([0,d.width()]),b.linefunc=d3.svg.line().x(function(a){return d.axes.hor.scale(a.name)+d.axes.hor.scale.rangeBand()/2}).y(function(a){return d.axes.ver.scale(a.value)}).interpolate(d.config.area.interpolation),b.areafunc=d3.svg.area().x(b.linefunc.x()).y0(b.linefunc.y()).y1(d.axes.ver.scale(0)).interpolate(d.config.area.interpolation),b.area=b.path.append("svg:path").classed(a.constants.classes.areapath+c,!0).attr("d",b.areafunc).style("opacity",d.config.area.opacity).style("-moz-opacity",d.config.area.opacity).style("fill",e),b.line=b.path.append("svg:path").classed(a.constants.classes.linepath+c,!0).attr("d",b.linefunc).style("stroke","white").style("fill","none"),b.path.selectAll("."+a.constants.classes.dot).data(d.dataset[c]).enter().append("circle").classed(a.constants.classes.dot,!0).attr("cx",b.linefunc.x()).attr("cy",b.linefunc.y()).attr("r",3.5).style("fill","white")},a.BarGraph=function(b,c){var d=this;a.Graph.call(d,b,c).setDefaults().init(),d.bargroups={},d.axes["Horizontal"===d.config.graph.orientation?"ver":"hor"].scale.domain(d.labels);var e,f,g=d.categories.length;for(e=0;g>e;e+=1)f=d.categories[e],d.bargroups[f]=d.chart.append("g").classed("cg-"+a.util.formatClassName(f),!0),d["draw"+d.config.graph.orientation+"Bars"](e);d.finalize()},a.BarGraph.prototype=a.util.inherits(a.Graph),a.BarGraph.prototype.setDefaults=function(){var a=this;return a.graphdef.stepup=!1,this},a.BarGraph.prototype.drawHorizontalBars=function(b){var c=this,d=a.util.getColorBand(this.config,b),e=c.categories.length,f=c.bargroups[c.categories[b]].selectAll("g").data(c.graphdef.dataset[c.categories[b]]).enter().append("g").classed("cge-"+a.util.formatClassName(c.categories[b]),!0);f.append("rect").classed(a.util.formatClassName(c.categories[b]),!0).classed("cr-"+a.util.formatClassName(c.categories[b]),!0).attr("height",c.axes.ver.scale.rangeBand()/e).attr("x",0).attr("y",function(a){return c.axes.ver.scale(a.name)}).style("stroke",c.config.bar.strokecolor).style("fill",d).transition().duration(c.config.effects.duration).delay(function(a,b){return b*c.config.effects.duration}).attr("width",function(a){return c.axes.hor.scale(a.value)
}).call(a.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",a.effects.bar.mouseover(c,b)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",a.effects.bar.mouseout(c,b))}),f.append("text").attr("y",function(a){return c.axes.ver.scale(a.name)+c.axes.ver.scale.rangeBand()/e/2}).attr("dx",4).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+a.util.formatClassName(c.categories[b]),!0).style("fill",c.config.label.showlabel?a.util.getColorBand(c.config,b):"none").style("font-family",c.config.bar.fontfamily).style("font-size",c.config.bar.fontsize).style("font-weight",c.config.bar.fontweight).text(function(b){return a.util.getLabelValue(c,b)}).transition().duration(c.config.effects.duration).delay(function(a,b){return b*c.config.effects.duration}).attr("x",function(a){return c.axes.hor.scale(a.value)}),f.append("svg:title").text(function(d,e){return a.util.getTooltipText(c,c.categories[b],c.labels[e],d)}),c.bargroups[c.categories[b]].attr("transform","translate(0,"+b*c.axes.ver.scale.rangeBand()/e+")")},a.BarGraph.prototype.drawVerticalBars=function(b){var c=this,d=a.util.getColorBand(this.config,b),e=c.categories.length,f=c.bargroups[c.categories[b]].selectAll("g").data(c.graphdef.dataset[c.categories[b]]).enter().append("g").classed("cge-"+a.util.formatClassName(c.categories[b]),!0);f.append("rect").classed(a.util.formatClassName(c.categories[b]),!0).classed("cr-"+a.util.formatClassName(c.categories[b]),!0).attr("height",0).attr("width",0).attr("x",function(a){return c.axes.hor.scale(a.name)}).attr("y",0).style("stroke",c.config.bar.strokecolor).style("fill",d).transition().duration(c.config.effects.duration).delay(b*c.config.effects.duration).attr("height",function(a){return c.height()-c.axes.ver.scale(a.value)}).attr("width",c.axes.hor.scale.rangeBand()/e).call(a.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",a.effects.bar.mouseover(c,b)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",a.effects.bar.mouseout(c,b))}),f.append("text").attr("transform","scale(1,-1)").attr("x",function(a){return c.axes.hor.scale(a.name)+c.axes.hor.scale.rangeBand()/e/2}).attr("y",-10).attr("dx",0).attr("dy",".35em").attr("text-anchor","middle").classed("cr-"+a.util.formatClassName(c.categories[b]),!0).style("fill",c.config.label.showlabel?a.util.getColorBand(c.config,b):"none").style("font-family",c.config.bar.fontfamily).style("font-size",c.config.bar.fontsize).style("font-weight",c.config.bar.fontweight).text(function(b){return a.util.getLabelValue(c,b)}).transition().duration(c.config.effects.duration).delay(b*c.config.effects.duration).attr("y",function(a){return-(c.height()-c.axes.ver.scale(a.value))-10}),f.append("svg:title").text(function(d,e){return a.util.getTooltipText(c,c.categories[b],c.labels[e],d)}),c.bargroups[c.categories[b]].attr("transform","translate("+b*c.axes.hor.scale.rangeBand()/e+","+c.height()+") scale(1,-1)")},a.DonutGraph=function(b,c){var d=this;a.Graph.call(d,b,c).setDefaults().init(),d.radius=2*Math.min(d.height(),d.width())/5,d.center={x:d.width()/2,y:d.height()/2},d.category=b.categories[0];var e=a.util.getCategoryData(d.graphdef,[d.category]),f=d3.svg.arc().innerRadius(d.radius*d.config.donut.factor).outerRadius(d.radius),g=d3.layout.pie();d.chart.data(e),d.arcs=d.chart.selectAll("g.arc").data(g).enter().append("g").classed(a.constants.classes.arc+a.util.formatClassName(d.category),!0).attr("transform","translate("+d.center.x+","+d.center.y+")"),d.arcs.append("path").attr("d",f).style("fill",function(b,c){return a.util.getColorBand(d.config,c)}).style("stroke",d.config.donut.strokecolor).style("stroke-width",d.config.donut.strokewidth).on("mouseover",a.effects.donut.mouseover(d.center,f,d.config)).on("mouseout",a.effects.donut.mouseout(d.center,d.config)),d.arcs.append("text").attr("transform",function(a){return"translate("+f.centroid(a)+")"}).attr("dy",".35em").attr("text-anchor","middle").style("fill",d.config.label.showlabel?d.config.donut.fontfill:"none").style("font-family",d.config.donut.fontfamily).style("font-size",d.config.donut.fontsize).style("font-weight",d.config.donut.fontweight).style("font-variant",d.config.donut.fontvariant).text(function(b){return a.util.getLabelValue(d,b)}),d.arcs.append("svg:title").text(function(b,c){return a.util.getTooltipText(d,d.category,d.labels[c],b)})},a.DonutGraph.prototype=a.util.inherits(a.Graph),a.DonutGraph.prototype.setDefaults=function(){var a=this;return a.graphdef.stepup=!1,this},a.LineGraph=function(b,c){var d=this;a.Graph.call(d,b,c).setDefaults().init(),d.linegroups={},d.dataset=a.util.getDataArray(d.graphdef);var e,f,g,h=d.categories.length,i=d.labels;for(d.axes["Horizontal"===d.config.graph.orientation?"ver":"hor"].scale.domain(i),g=0;h>g;g+=1)f=d.chart.append("g").classed("cg-"+a.util.formatClassName(d.categories[g]),!0).append("g").classed("cge-"+a.util.formatClassName(d.categories[g]),!0).datum(d.dataset[g]),e={path:f,func:void 0},d["draw"+d.config.graph.orientation+"Lines"](e,g),d.linegroups[d.categories[g]]=e;d.finalize()},a.LineGraph.prototype=a.util.inherits(a.Graph),a.LineGraph.prototype.setDefaults=function(){var a=this;return a.graphdef.stepup=!1,a.config.scale.ordinality=0,this},a.LineGraph.prototype.drawHorizontalLines=function(b,c){var d=this,e=d.axes,f=(d.config,a.util.getColorBand(d.config,c));return d.axes.ver.scale.rangePoints([0,d.height()]),b.func=d3.svg.line().x(function(a){return e.hor.scale(a.value)}).y(function(a){return e.ver.scale(a.name)+e.ver.scale.rangeBand()/2}).interpolate(a.config.line.interpolation),b.path.append("path").classed("cr-"+a.util.formatClassName(d.categories[c]),!0).attr("d",b.func).style("fill","none").style("stroke",f).style("stroke-width",1.5).style("stroke-opacity",.01).transition().duration(3*d.config.effects.duration).delay(2*c*d.config.effects.duration).style("stroke-opacity",1).call(a.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("path").on("mouseover",a.effects.line.mouseover(d,c)),d3.select(this.parentNode.parentNode).selectAll("path").on("mouseout",a.effects.line.mouseout(d,c)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseover",a.effects.line.mouseover(d,c)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseout",a.effects.line.mouseout(d,c))}),b.path.selectAll("circle").data(d.dataset[c]).enter().append("circle").classed("cr-"+a.util.formatClassName(d.categories[c]),!0).attr("cx",b.func.x()).attr("cy",b.func.y()).attr("r",3.5).style("fill",f).style("fill-opacity",.6).style("stroke","#fff").append("svg:title").text(function(b,e){return a.util.getTooltipText(d,d.categories[c],d.labels[e],b)}),b.path.selectAll("text").data(d.dataset[c]).enter().append("text").attr("x",function(a){return e.hor.scale(a.value)}).attr("y",function(a){return e.ver.scale(a.name)+e.ver.scale.rangeBand()/2}).attr("dx",10).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+a.util.formatClassName(d.categories[c]),!0).style("fill",d.config.label.showlabel?a.util.getColorBand(d.config,c):"none").style("font-family",d.config.bar.fontfamily).style("font-size",d.config.bar.fontsize).style("font-weight",d.config.bar.fontweight).text(function(b){return a.util.getLabelValue(d,b)}),this},a.LineGraph.prototype.drawVerticalLines=function(b,c){var d=this,e=d.axes,f=(d.config,a.util.getColorBand(d.config,c));return d.axes.hor.scale.rangePoints([0,d.width()]),b.func=d3.svg.line().x(function(a){return e.hor.scale(a.name)+e.hor.scale.rangeBand()/2}).y(function(a){return e.ver.scale(a.value)}).interpolate(a.config.line.interpolation),b.path.append("path").attr("d",b.func).classed("cr-"+a.util.formatClassName(d.categories[c]),!0).style("fill","none").style("stroke",f).style("stroke-width",1.5).style("stroke-opacity",.01).transition().duration(d.config.effects.duration).delay(2*c*d.config.effects.duration).style("stroke-opacity",1).call(a.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("path").on("mouseover",a.effects.line.mouseover(d,c)),d3.select(this.parentNode.parentNode).selectAll("path").on("mouseout",a.effects.line.mouseout(d,c)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseover",a.effects.line.mouseover(d,c)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseout",a.effects.line.mouseout(d,c))}),b.path.selectAll("circle").data(d.dataset[c]).enter().append("circle").attr("cx",b.func.x()).attr("cy",b.func.y()).attr("r",3.5).classed("cr-"+a.util.formatClassName(d.categories[c]),!0).style("fill",f).style("fill-opacity",.2).style("stroke","#fff").append("svg:title").text(function(b,e){return a.util.getTooltipText(d,d.categories[c],d.labels[e],b)}),b.path.selectAll("text").data(d.dataset[c]).enter().append("text").attr("x",function(a){return e.hor.scale(a.name)+e.hor.scale.rangeBand()/2}).attr("y",function(a){return e.ver.scale(a.value)-20}).attr("dx",0).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+a.util.formatClassName(d.categories[c]),!0).style("fill",d.config.label.showlabel?a.util.getColorBand(d.config,c):"none").style("font-family",d.config.bar.fontfamily).style("font-size",d.config.bar.fontsize).style("font-weight",d.config.bar.fontweight).text(function(b){return a.util.getLabelValue(d,b)}),this},a.PercentAreaGraph=function(b,c){var d=this;a.Graph.call(d,b,c).setDefaults().init();var e=d3.layout.stack().offset("zero")(d.categories.map(function(a){return b.dataset[a].map(function(a){return{x:a.name,y:+a.value}})})),f=d.labels;d.categories,d.axes["Horizontal"===d.config.graph.orientation?"ver":"hor"].scale.domain(f),d.areagroup=d.chart.selectAll("g.areagroup").data(e).enter().append("g").attr("class",function(b,c){return a.util.getClassName(this,"cge-"+d.categories[c])}),d["draw"+d.config.graph.orientation+"Area"](),d.finalize(!0)},a.PercentAreaGraph.prototype=a.util.inherits(a.Graph),a.PercentAreaGraph.prototype.setDefaults=function(){var a=this;return a.graphdef.stepup="percent",this},a.PercentAreaGraph.prototype.drawHorizontalArea=function(){var b=this,c=b.axes,d=b.categories,e=b.config,f=a.util.getSumUpArray(b.graphdef);c.ver.scale.rangePoints([0,b.height()]);for(var g=0;g<d.length;g+=1)a.effects.area.mouseover(b,g),a.effects.area.mouseout(b,g);b.areagroup.append("path").attr("class",function(b,c){return a.util.getClassName(this,a.constants.classes.area+a.util.formatClassName(d[c]))}).style("fill",function(b,c){return a.util.getColorBand(e,c)}).attr("d",d3.svg.area().y(function(a){return c.ver.scale(a.x)+c.ver.scale.rangeBand()/2}).x0(function(b,d){return c.hor.scale(a.util.getPercentage(b.y0,f[d]))}).x1(function(b,d){return c.hor.scale(a.util.getPercentage(b.y0+b.y,f[d]))}).interpolate(b.config.area.interpolation)).on("mouseover",function(a,c){b.effects[d[c]].mouseover()}).on("mouseout",function(a,c){b.effects[d[c]].mouseout()}),b.areagroup.append("path").attr("class",function(b,c){return a.util.getClassName(this,a.constants.classes.line+a.util.formatClassName(d[c]))}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().y(function(a){return c.ver.scale(a.x)+c.ver.scale.rangeBand()/2}).x(function(b,d){return c.hor.scale(a.util.getPercentage(b.y0+b.y,f[d]))}).interpolate(b.config.area.interpolation))},a.PercentAreaGraph.prototype.drawVerticalArea=function(){var b=this,c=b.axes,d=b.categories,e=b.config,f=a.util.getSumUpArray(b.graphdef);c.hor.scale.rangePoints([0,b.width()]);for(var g=0;g<d.length;g+=1)a.effects.area.mouseover(b,g),a.effects.area.mouseout(b,g);b.areagroup.append("path").attr("class",function(b,c){return a.util.getClassName(this,a.constants.classes.area+a.util.formatClassName(d[c]))}).style("fill",function(b,c){return a.util.getColorBand(e,c)}).attr("d",d3.svg.area().x(function(a){return c.hor.scale(a.x)+c.hor.scale.rangeBand()/2}).y0(function(b,d){return c.ver.scale(a.util.getPercentage(b.y0,f[d]))}).y1(function(b,d){return c.ver.scale(a.util.getPercentage(b.y0+b.y,f[d]))}).interpolate(b.config.area.interpolation)).on("mouseover",function(a,c){b.effects[d[c]].mouseover()}).on("mouseout",function(a,c){b.effects[d[c]].mouseout()}),b.areagroup.append("path").attr("class",function(b,c){return a.util.getClassName(this,a.constants.classes.line+a.util.formatClassName(d[c]))}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().x(function(a){return c.hor.scale(a.x)+c.hor.scale.rangeBand()/2}).y(function(b,d){return c.ver.scale(a.util.getPercentage(b.y0+b.y,f[d]))}).interpolate(b.config.area.interpolation))},a.PercentBarGraph=function(b,c){var d=this;a.Graph.call(d,b,c).setDefaults().init(),d.bargroups=[];var e,f,g,h,i,j=d.labels,k=j.map(function(){return 0}),l=j.map(function(){return 0});for(d.axes["Horizontal"===d.config.graph.orientation?"ver":"hor"].scale.domain(j),g=0,h=d.categories.length;h>g;g+=1)i=a.util.getColorBand(d.config,g),e=d.chart.append("g").classed("cg-"+d.categories[g],!0),f=e.selectAll("g").data(d.graphdef.dataset[d.categories[g]]).enter().append("g").classed("cge-"+a.util.formatClassName(d.categories[g]),!0),d["draw"+a.util.getPascalCasedName(d.config.graph.orientation)+"Bars"](f,k,l,g),"Vertical"===d.config.graph.orientation&&e.attr("transform","translate(0,"+2*d.height()+") scale(1,-1)"),d.bargroups.push(e);d.finalize()},a.PercentBarGraph.prototype=a.util.inherits(a.Graph),a.PercentBarGraph.prototype.setDefaults=function(){var a=this;return a.graphdef.stepup="percent",a.config.scale.ordinality=0,this},a.PercentBarGraph.prototype.drawHorizontalBars=function(b,c,d,e){var f=this,g=this.axes,h=a.util.getColorBand(this.config,e),i=(this.config,a.util.getSumUpArray(this.graphdef));b.append("rect").attr("height",g.ver.scale.rangeBand()).attr("width",0).attr("x",function(b,d){var e=g.hor.scale(a.util.getPercentage(c[d],i[d]));return c[d]+=b.value,e}).attr("y",function(a){return g.ver.scale(a.name)}).classed("cr-"+a.util.formatClassName(f.categories[e]),!0).style("stroke","none").style("fill",h).transition().duration(a.config.effects.duration).delay(e*a.config.effects.duration).attr("width",function(b,c){return g.hor.scale(a.util.getPercentage(b.value,i[c]))}).call(a.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",a.effects.bar.mouseover(f,e,f.config.effects.textcolor)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",a.effects.bar.mouseout(f,e,f.config.effects.textcolor))}),b.append("text").attr("y",function(a){return g.ver.scale(a.name)+g.ver.scale.rangeBand()/2}).attr("dx",0).attr("dy",".35em").attr("text-anchor","end").classed("cr-"+a.util.formatClassName(f.categories[e]),!0).style("fill",f.config.label.showlabel?f.config.effects.textcolor:"none").style("font-family",this.config.bar.fontfamily).style("font-size",this.config.bar.fontsize).style("font-weight",this.config.bar.fontweight).text(function(b,d){return g.hor.scale(a.util.getPercentage(c[d],i[d]))>15?String(Math.round(a.util.getPercentage(b.value,i[d]))):null}).transition().duration(a.config.effects.duration).delay(e*a.config.effects.duration).attr("x",function(b,c){return d[c]+=b.value,g.hor.scale(a.util.getPercentage(d[c],i[c]))-5})},a.PercentBarGraph.prototype.drawVerticalBars=function(b,c,d,e){var f=this,g=this.height(),h=this.axes,i=a.util.getColorBand(this.config,e),j=(this.config,a.util.getSumUpArray(this.graphdef));b.append("rect").attr("height",0).attr("width",h.hor.scale.rangeBand()).attr("x",function(a){return h.hor.scale(a.name)}).attr("y",function(b,d){var e=h.ver.scale(a.util.getPercentage(c[d],j[d]));return c[d]-=b.value,e}).classed("cr-"+a.util.formatClassName(f.categories[e]),!0).style("stroke","none").style("fill",i).transition().duration(a.config.effects.duration).delay(e*a.config.effects.duration).attr("height",function(b,c){return g-h.ver.scale(a.util.getPercentage(b.value,j[c]))}).call(a.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",a.effects.bar.mouseover(f,e,f.config.effects.textcolor)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",a.effects.bar.mouseout(f,e,f.config.effects.textcolor))}),b.append("text").attr("transform","scale(1,-1)").attr("x",function(a){return h.hor.scale(a.name)+h.hor.scale.rangeBand()/2}).attr("y",-g+5).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+a.util.formatClassName(f.categories[e]),!0).style("fill",f.config.label.showlabel?f.config.effects.textcolor:"none").style("font-family",this.config.bar.fontfamily).style("font-size",this.config.bar.fontsize).style("font-weight",this.config.bar.fontweight).text(function(b,c){return g-h.ver.scale(a.util.getPercentage(b.value,j[c]))>15?String(Math.round(a.util.getPercentage(b.value,j[c]))):null}).transition().duration(a.config.effects.duration).delay(e*a.config.effects.duration).attr("y",function(b,c){return d[c]+=b.value,-(2*g-h.ver.scale(a.util.getPercentage(d[c],j[c])))+5})},a.PieGraph=function(b,c){var d=this;a.Graph.call(d,b,c).setDefaults().init(),d.radius=2*Math.min(d.height(),d.width())/5,d.center={x:d.width()/2,y:d.height()/2},d.category=b.categories[0];var e=a.util.getCategoryData(d.graphdef,[d.category]),f=d3.svg.arc().innerRadius(0).outerRadius(d.radius),g=d3.layout.pie();d.chart.data(e),d.arcs=d.chart.selectAll("g.arc").data(g).enter().append("g").classed(a.constants.classes.arc+a.util.formatClassName(d.category),!0).attr("class",function(b,c){return a.util.getClassName(this,"cge-"+d.labels[c])}).attr("transform","translate("+d.center.x+","+d.center.y+")"),d.arcs.append("path").attr("d",f).style("fill",function(b,c){return a.util.getColorBand(d.config,c)}).style("stroke",d.config.pie.strokecolor).style("stroke-width",d.config.pie.strokewidth).on("mouseover",a.effects.pie.mouseover(d,d.center,f,d.config)).on("mouseout",a.effects.pie.mouseout(d,d.center,d.config)),d.arcs.append("text").attr("transform",function(a){return"translate("+f.centroid(a)+")"}).attr("dy",".35em").attr("text-anchor","middle").style("fill",d.config.label.showlabel?d.config.donut.fontfill:"none").style("font-family",d.config.pie.fontfamily).style("font-size",d.config.pie.fontsize).style("font-weight",d.config.pie.fontweight).style("font-variant",d.config.pie.fontvariant).text(function(b){return a.util.getLabelValue(d,b)}),d.arcs.append("svg:title").text(function(b,c){return a.util.getTooltipText(d,d.category,d.labels[c],b)})},a.PieGraph.prototype=a.util.inherits(a.Graph),a.PieGraph.prototype.setDefaults=function(){var a=this;return a.graphdef.stepup=!1,a.config.legend.legendtype="labels",this},a.PolarAreaGraph=function(b,c){var d=this;a.Graph.call(d,b,c).setDefaults().init(),d.maxRadius=2*Math.min(d.height(),d.width())/5,d.center={x:d.width()/2,y:d.height()/2},d.category=d.categories[0];var e=a.util.getCategoryData(d.graphdef,[d.category]),f=d3.layout.pie(),g=e[0].map(function(a){return d3.svg.arc().innerRadius(0).outerRadius(a*d.maxRadius/d.max())});d.chart.data(e),d.arcs=d.chart.selectAll("g.arc").data(f).enter().append("g").classed(a.constants.classes.arc+a.util.formatClassName(d.category),!0).attr("transform","translate("+d.center.x+","+d.center.y+")"),d.arcs.append("path").attr("d",g[0]).style("fill",function(b,c){return a.util.getColorBand(d.config,c)}).style("stroke",d.config.pie.strokecolor).style("stroke-width",d.config.pie.strokewidth),d.arcs.append("text").attr("transform",function(a,b){return"translate("+g[b].centroid(a)+")"}).attr("dy",".35em").attr("text-anchor","middle").style("fill",d.config.pie.fontfill).style("font-family",d.config.pie.fontfamily).style("font-size",d.config.pie.fontsize).style("font-weight",d.config.pie.fontweight).style("font-variant",d.config.pie.fontvariant).text(function(b){return a.util.getLabelValue(d,b)}),d.arcs.append("svg:title").text(function(b,c){return a.util.getTooltipText(d,d.category,d.labels[c],b)})},a.PolarAreaGraph.prototype=a.util.inherits(a.Graph),a.PolarAreaGraph.prototype.setDefaults=function(){var a=this;return a.graphdef.stepup=!1,this},a.StackedAreaGraph=function(b,c){var d=this;a.Graph.call(d,b,c).setDefaults().init();var e=d3.layout.stack().offset(d.config.area.offset)(d.categories.map(function(a){return b.dataset[a].map(function(a){return{x:a.name,y:+a.value}})}));d.axes["Horizontal"===d.config.graph.orientation?"ver":"hor"].scale.domain(d.labels.map(function(a){return a})),d.areagroup=d.chart.append("g").selectAll("g").data(e).enter().append("g").attr("class",function(b,c){return a.util.getClassName(this,"cge-"+d.categories[c])}),d["draw"+d.config.graph.orientation+"Area"](),d.finalize()},a.StackedAreaGraph.prototype=a.util.inherits(a.Graph),a.StackedAreaGraph.prototype.setDefaults=function(){var a=this;return a.graphdef.stepup=!0,this},a.StackedAreaGraph.prototype.drawHorizontalArea=function(){var b=this,c=b.axes,d=b.categories,e=b.config;c.ver.scale.rangePoints([0,b.height()]);for(var f=0;f<d.length;f+=1)a.effects.area.mouseover(b,f),a.effects.area.mouseout(b,f);return b.areagroup.append("path").attr("class",function(b,c){return a.util.getClassName(this,a.constants.classes.area+d[c])}).style("fill",function(b,c){return a.util.getColorBand(e,c)}).attr("d",d3.svg.area().y(function(a){return c.ver.scale(a.x)+c.ver.scale.rangeBand()/2}).x0(function(a){return c.hor.scale(a.y0)}).x1(function(a){return c.hor.scale(a.y0+a.y)}).interpolate(b.config.area.interpolation)).on("mouseover",function(a,c){b.effects[d[c]].mouseover()}).on("mouseout",function(a,c){b.effects[d[c]].mouseout()}),b.areagroup.append("path").attr("class",function(b,c){return a.util.getClassName(this,a.constants.classes.line+d[c])}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().y(function(a){return c.ver.scale(a.x)+c.ver.scale.rangeBand()/2}).x(function(a){return c.hor.scale(a.y0+a.y)}).interpolate(b.config.area.interpolation)),b},a.StackedAreaGraph.prototype.drawVerticalArea=function(){var b=this,c=b.axes,d=b.categories,e=b.config;c.hor.scale.rangePoints([0,b.width()]);for(var f=0;f<d.length;f+=1)a.effects.area.mouseover(b,f),a.effects.area.mouseout(b,f);return b.areagroup.append("path").attr("class",function(b,c){return a.util.getClassName(this,a.constants.classes.area+d[c])}).style("fill",function(b,c){return a.util.getColorBand(e,c)}).attr("d",d3.svg.area().x(function(a){return c.hor.scale(a.x)+c.hor.scale.rangeBand()/2}).y0(function(a){return c.ver.scale(a.y0)}).y1(function(a){return c.ver.scale(a.y0+a.y)}).interpolate(b.config.area.interpolation)).on("mouseover",function(a,c){b.effects[d[c]].mouseover()}).on("mouseout",function(a,c){b.effects[d[c]].mouseout()}),b.areagroup.append("path").attr("class",function(b,c){return a.util.getClassName(this,a.constants.classes.line+d[c])}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().x(function(a){return c.hor.scale(a.x)+c.hor.scale.rangeBand()/2}).y(function(a){return c.ver.scale(a.y0+a.y)}).interpolate(b.config.area.interpolation)),b},a.StackedBarGraph=function(b,c){var d=this;a.Graph.call(d,b,c).setDefaults().init(),d.bargroups={};var e,f,g=d.labels,h=g.map(function(){return 0}),i=g.map(function(){return 0});for(d.axes["Horizontal"===d.config.graph.orientation?"ver":"hor"].scale.domain(g),e=0,f=d.categories.length;f>e;e+=1)d.bargroups[d.categories[e]]=d.chart.append("g").classed("cg-"+a.util.formatClassName(d.categories[e]),!0),d["draw"+d.config.graph.orientation+"Bars"](e,h,i);d.finalize()},a.StackedBarGraph.prototype=a.util.inherits(a.Graph),a.StackedBarGraph.prototype.setDefaults=function(){var a=this;return a.graphdef.stepup=!0,this},a.StackedBarGraph.prototype.drawHorizontalBars=function(b,c,d){var e=this,f=this.axes,g=a.util.getColorBand(this.config,b),h=this.config,i=this.bargroups[this.categories[b]],j=i.selectAll("g").data(this.graphdef.dataset[e.categories[b]]).enter().append("g").classed("cge-"+a.util.formatClassName(e.categories[b]),!0);j.append("rect").attr("height",f.ver.scale.rangeBand()).attr("width",0).attr("x",function(a,b){var d=f.hor.scale(c[b]);return c[b]+=a.value,d}).attr("y",function(a){return f.ver.scale(a.name)}).classed("cr-"+a.util.formatClassName(e.categories[b]),!0).style("stroke","none").style("fill",g).transition().duration(a.config.effects.duration).delay(b*a.config.effects.duration).attr("width",function(a,b){return f.hor.scale(c[b])-f.hor.scale(c[b]-a.value)}).each("end",function(){d3.select(this).on("mouseover",a.effects.bar.mouseover(e,b,e.config.effects.textcolor)),d3.select(this).on("mouseout",a.effects.bar.mouseout(e,b,e.config.effects.textcolor))}),j.append("text").attr("y",function(a){return f.ver.scale(a.name)+f.ver.scale.rangeBand()/2}).attr("dx",0).attr("dy",".35em").attr("text-anchor","end").classed("cr-"+a.util.formatClassName(e.categories[b]),!0).style("fill",e.config.label.showlabel?e.config.effects.textcolor:"none").style("font-family",h.bar.fontfamily).style("font-size",h.bar.fontsize).style("font-weight",h.bar.fontweight).text(function(b){return f.hor.scale(b.value)>15?a.util.getLabelValue(e,b):null}).transition().duration(a.config.effects.duration).delay(b*a.config.effects.duration).attr("x",function(a,b){return d[b]+=a.value,f.hor.scale(d[b])-5}),j.append("svg:title").text(function(c,d){return a.util.getTooltipText(e,e.categories[b],e.labels[d],c)})},a.StackedBarGraph.prototype.drawVerticalBars=function(b,c,d){var e=this,f=this.height(),g=this.axes,h=a.util.getColorBand(this.config,b),i=this.config,j=this.bargroups[e.categories[b]],k=j.selectAll("g").data(this.graphdef.dataset[e.categories[b]]).enter().append("g").classed("cge-"+a.util.formatClassName(e.categories[b]),!0);k.append("rect").attr("height",0).attr("width",g.hor.scale.rangeBand()).attr("x",function(a){return g.hor.scale(a.name)}).attr("y",function(a,b){var d=g.ver.scale(c[b]);return c[b]-=a.value,d}).classed("cr-"+a.util.formatClassName(e.categories[b]),!0).style("stroke","none").style("fill",h).transition().duration(a.config.effects.duration).delay(b*a.config.effects.duration).attr("height",function(a,b){return-(g.ver.scale(-c[b])-g.ver.scale(-c[b]-a.value))}).each("end",function(){d3.select(this).on("mouseover",a.effects.bar.mouseover(e,b,e.config.effects.textcolor)),d3.select(this).on("mouseout",a.effects.bar.mouseout(e,b,e.config.effects.textcolor))}),k.append("text").attr("transform","scale(1,-1)").attr("x",function(a){return g.hor.scale(a.name)+g.hor.scale.rangeBand()/2}).attr("y",-f+5).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+a.util.formatClassName(e.categories[b]),!0).style("fill",e.config.label.showlabel?e.config.effects.textcolor:"none").style("font-family",i.bar.fontfamily).style("font-size",i.bar.fontsize).style("font-weight",i.bar.fontweight).text(function(b){return f-g.ver.scale(b.value)>15?a.util.getLabelValue(e,b):null}).transition().duration(a.config.effects.duration).delay(b*a.config.effects.duration).attr("y",function(a,b){return d[b]+=a.value,-(2*f-g.ver.scale(d[b]))+5}),k.append("svg:title").text(function(c,d){return a.util.getTooltipText(e,e.categories[b],e.labels[d],c)}),j.attr("transform","translate(0,"+2*this.height()+") scale(1,-1)")},a.StepUpBarGraph=function(b,c){var d=this;a.Graph.call(d,b,c).setDefaults().init(),this.bargroups={};var e,f=d.categories.length,g=d.labels.map(function(){return 0}),h=d.labels.map(function(){return 0});for(d.axes["Horizontal"===this.config.graph.orientation?"ver":"hor"].scale.domain(this.labels),e=0;f>e;e+=1)d.bargroups[d.categories[e]]=this.chart.append("g").classed("cg-"+a.util.formatClassName(d.categories[e]),!0),d["draw"+d.config.graph.orientation+"Bars"](e,g,h);d.finalize()},a.StepUpBarGraph.prototype=a.util.inherits(a.Graph),a.StepUpBarGraph.prototype.setDefaults=function(){var a=this;return a.graphdef.stepup=!0,this},a.StepUpBarGraph.prototype.drawHorizontalBars=function(b,c,d){var e=this,f=e.categories.length,g=a.util.getColorBand(e.config,b),h=e.bargroups[e.categories[b]],i=h.selectAll("g").data(e.graphdef.dataset[e.categories[b]]).enter().append("g").classed("cge-"+a.util.formatClassName(e.categories[b]),!0);i.append("rect").attr("height",e.axes.ver.scale.rangeBand()/f).attr("width",0).attr("x",function(a,b){var d=e.axes.hor.scale(c[b]);return c[b]+=a.value,d}).attr("y",function(a){return e.axes.ver.scale(a.name)}).classed("cr-"+a.util.formatClassName(e.categories[b]),!0).style("stroke","none").style("fill",g).transition().duration(e.config.effects.duration).delay(b*e.config.effects.duration).attr("width",function(a,b){return e.axes.hor.scale(c[b])-e.axes.hor.scale(c[b]-a.value)}).call(a.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",a.effects.bar.mouseover(e,b)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",a.effects.bar.mouseout(e,b))}),i.append("text").attr("y",function(a){return e.axes.ver.scale(a.name)+e.axes.ver.scale.rangeBand()/f/2}).attr("dx",4).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+a.util.formatClassName(e.categories[b]),!0).style("fill",e.config.label.showlabel?a.util.getColorBand(e.config,b):"none").style("font-family",e.config.bar.fontfamily).style("font-size",e.config.bar.fontsize).style("font-weight",e.config.bar.fontweight).text(function(b){return a.util.getLabelValue(e,b)}).transition().duration(e.config.effects.duration).delay(b*e.config.effects.duration).attr("x",function(a,b){return d[b]+=a.value,e.axes.hor.scale(d[b])}),i.append("svg:title").text(function(c,d){return a.util.getTooltipText(e,e.categories[b],e.labels[d],c)}),h.attr("transform","translate(0,"+b*e.axes.ver.scale.rangeBand()/f+")")},a.StepUpBarGraph.prototype.drawVerticalBars=function(b,c,d){var e=this,f=e.categories.length,g=a.util.getColorBand(e.config,b),h=e.bargroups[e.categories[b]],i=h.selectAll("g").data(e.graphdef.dataset[e.categories[b]]).enter().append("g").classed("cge-"+a.util.formatClassName(e.categories[b]),!0);i.append("rect").attr("height",0).attr("width",e.axes.hor.scale.rangeBand()/f).attr("x",function(a){return e.axes.hor.scale(a.name)}).attr("y",function(a,b){var d=e.axes.ver.scale(c[b]);return c[b]-=a.value,d}).classed("cr-"+a.util.formatClassName(e.categories[b]),!0).style("stroke","none").style("fill",g).transition().duration(e.config.effects.duration).delay(b*e.config.effects.duration).attr("height",function(a,b){return-(e.axes.ver.scale(-c[b])-e.axes.ver.scale(-c[b]-a.value))}).call(a.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",a.effects.bar.mouseover(e,b)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",a.effects.bar.mouseout(e,b))}),i.append("text").attr("transform","scale(1,-1)").attr("x",function(a){return e.axes.hor.scale(a.name)+e.axes.hor.scale.rangeBand()/f/2}).attr("y",-e.height()-10).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+a.util.formatClassName(e.categories[b]),!0).style("fill",e.config.label.showlabel?a.util.getColorBand(e.config,b):"none").style("font-family",e.config.bar.fontfamily).style("font-size",e.config.bar.fontsize).style("font-weight",e.config.bar.fontweight).text(function(b){return a.util.getLabelValue(e,b)}).transition().duration(e.config.effects.duration).delay(b*e.config.effects.duration).attr("y",function(a,b){return d[b]+=a.value,-(2*e.height()-e.axes.ver.scale(d[b]))-10}),i.append("svg:title").text(function(c,d){return a.util.getTooltipText(e,e.categories[b],e.labels[d],c)}),h.attr("transform","translate("+b*e.axes.hor.scale.rangeBand()/f+","+2*e.height()+") scale(1,-1)")},a.WaterfallGraph=function(b,c){var d=this;a.Graph.call(d,b,c).setDefaults().init(),d.bargroups={},d.axes["Horizontal"===d.config.graph.orientation?"ver":"hor"].scale.domain(d.labels);var e;d.categories.length,e=d.categories[0],d.bargroups[e]=d.chart.append("g").classed("cg-"+a.util.formatClassName(e),!0),d["draw"+d.config.graph.orientation+"Bars"](0),d.finalize()},a.WaterfallGraph.prototype=a.util.inherits(a.Graph),a.WaterfallGraph.prototype.setDefaults=function(){var a=this;
return a.graphdef.stepup="waterfall",a.config.legend.showlegends=!1,this},a.WaterfallGraph.prototype.drawHorizontalBars=function(b){var c=this,d=c.categories.length,e=a.util.getColorBand(c.config,b),f=c.bargroups[c.categories[b]],g=0,h=0,i=f.selectAll("g").data(c.graphdef.dataset[c.categories[b]]).enter().append("g").classed("cge-"+a.util.formatClassName(c.categories[b]),!0);i.append("rect").attr("height",c.axes.ver.scale.rangeBand()/d-2).attr("width",0).attr("x",function(a){var b=a.value<0?g+a.value:g;return g+=a.value,c.axes.hor.scale(b)}).attr("y",function(a){return c.axes.ver.scale(a.name)}).classed("cr-"+a.util.formatClassName(c.categories[b]),!0).style("stroke","none").style("fill",e).transition().duration(c.config.effects.duration).delay(b*c.config.effects.duration).attr("width",function(a){return c.axes.hor.scale(Math.abs(a.value))}).call(a.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",a.effects.bar.mouseover(c,b)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",a.effects.bar.mouseout(c,b))}),i.append("text").attr("y",function(a){return c.axes.ver.scale(a.name)+c.axes.ver.scale.rangeBand()/d/2}).attr("dx",4).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+a.util.formatClassName(c.categories[b]),!0).style("fill",c.config.label.showlabel?a.util.getColorBand(c.config,b):"none").style("font-family",c.config.bar.fontfamily).style("font-size",c.config.bar.fontsize).style("font-weight",c.config.bar.fontweight).text(function(b){return a.util.getLabelValue(c,b)}).transition().duration(c.config.effects.duration).delay(b*c.config.effects.duration).attr("x",function(a){var b=a.value<0?h:h+a.value;return h+=a.value,c.axes.hor.scale(b)}),i.append("svg:title").text(function(d,e){return a.util.getTooltipText(c,c.categories[b],c.labels[e],d)}),f.attr("transform","translate(0,"+b*c.axes.ver.scale.rangeBand()/d+")")},a.WaterfallGraph.prototype.drawVerticalBars=function(b){var c=this,d=a.util.getColorBand(this.config,b),e=c.categories.length,f=0,g=0,h=c.bargroups[c.categories[b]].selectAll("g").data(c.graphdef.dataset[c.categories[b]]).enter().append("g").classed("cge-"+a.util.formatClassName(c.categories[b]),!0);h.append("rect").classed("cr-"+a.util.formatClassName(c.categories[b]),!0).attr("height",0).attr("width",0).attr("x",function(a){return c.axes.hor.scale(a.name)}).attr("y",function(a){var b=a.value<0?f+a.value:f;return f+=a.value,c.height()-c.axes.ver.scale(b)}).style("stroke",c.config.bar.strokecolor).style("fill",d).transition().duration(c.config.effects.duration).delay(b*c.config.effects.duration).attr("height",function(a){return c.height()-c.axes.ver.scale(Math.abs(a.value))}).attr("width",c.axes.hor.scale.rangeBand()/e-2).call(a.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",a.effects.bar.mouseover(c,b)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",a.effects.bar.mouseout(c,b))}),h.append("text").attr("transform","scale(1,-1)").attr("x",function(a){return c.axes.hor.scale(a.name)+c.axes.hor.scale.rangeBand()/e/2}).attr("y",-10).attr("dx",0).attr("dy",".35em").attr("text-anchor","middle").classed("cr-"+a.util.formatClassName(c.categories[b]),!0).style("fill",c.config.label.showlabel?a.util.getColorBand(c.config,b):"none").style("font-family",c.config.bar.fontfamily).style("font-size",c.config.bar.fontsize).style("font-weight",c.config.bar.fontweight).text(function(b){return a.util.getLabelValue(c,b)}).transition().duration(c.config.effects.duration).delay(b*c.config.effects.duration).attr("y",function(a){g+=a.value;var b=a.value<0?g-a.value:g;return-(c.height()-c.axes.ver.scale(b))-10}),h.append("svg:title").text(function(d,e){return a.util.getTooltipText(c,c.categories[b],c.labels[e],d)}),c.bargroups[c.categories[b]].attr("transform","translate("+b*c.axes.hor.scale.rangeBand()/e+","+c.height()+") scale(1,-1)")},a.Table=function(){this.caption=void 0,this.position=void 0,this.graphdef=void 0,this.table=void 0,this.header=void 0,this.body=void 0,this.bodyrows={}},a.Table.prototype.init=function(b,c){this.graphdef=b,this.config=a.util.extend({},c),this.position=this.config.meta.pos||"body",this.table=d3.select(this.position).append("table").classed(this.config.table.tableclass,!0),this.header=this.table.append("thead").classed(this.config.table.headerclass,!0),this.body=this.table.append("tbody").classed(this.config.table.bodyclass,!0),this.footer=this.table.append("tfoot").classed(this.config.table.footerclass,!0)},a.Table.prototype.finalize=function(){},a.TableGraph=function(b,c){a.Table.apply(this,[b]),this.init(b,c),"Horizontal"===this.config.graph.orientation?this.setHorTable():this.setVerTable(),this.finalize()},a.TableGraph.prototype=a.util.inherits(a.Table),a.TableGraph.prototype.setHorTable=function(){var b=this.graphdef.categories,c=a.util.getTabularArray(this.graphdef);b.unshift(""),this.header.append("tr").selectAll("td").data(b).enter().append("td").text(function(a){return a}),b.shift(),this.bodyrows=this.body.selectAll("tr").data(c).enter().append("tr"),this.bodyrows.selectAll("td").data(function(a,b){return c[b]}).enter().append("td").attr("class",function(a,b){var c=0===b?"chart3rtablelabel":"chart3rtabledata";return d3.select(this).attr("class")+c}).text(function(a){return a})},a.TableGraph.prototype.setVerTable=function(){var b=a.util.getLabelArray(this.graphdef),c=this.graphdef.dataset;b.unshift(""),this.header.append("tr").selectAll("td").data(b).enter().append("td").text(function(a){return a}),b.shift(),this.bodyrows=this.body.selectAll("tr").data(this.graphdef.categories).enter().append("tr"),this.bodyrows.selectAll("td").data(function(a){var b,d,e=[];for(e.push(a),b=0,d=c[a].length;d>b;b+=1)e.push(c[a][b].value);return e}).enter().append("td").attr("class",function(a,b){var c=0===b?"chart3rtablelabel":"chart3rtabledata";return d3.select(this).attr("class")+c}).text(function(a){return a})},{chart:a.chart}}();